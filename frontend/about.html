<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://pro.fontawesome.com; style-src 'self' 'unsafe-inline' https://pro.fontawesome.com https://fonts.googleapis.com; font-src 'self' https://pro.fontawesome.com https://fonts.gstatic.com; img-src 'self' data:; connect-src 'self' http://127.0.0.1:* http://localhost:* ws://127.0.0.1:* wss://127.0.0.1:* ws://localhost:* wss://localhost:*;">
    <title>FitZone - About Us</title>
    
    <!-- CRITICAL: Add the direct logout script as first script to ensure it works -->
    <script src="js/direct-logout.js"></script>

    <!-- CRITICAL: Load logout fix very first to ensure it can't be overridden -->
    <script src="js/global-logout-fix.js"></script>
    
    <!-- Load WebSocket fixes early -->
    <script src="js/global-websocket-fix.js"></script>
    
    <!-- Authentication and CORS handlers -->
    <script src="js/cors-proxy.js"></script>
    <script src="js/auth-persistence.js"></script>
    
    <!-- Base configuration script must load first -->
    <script src="js/config.js"></script>
    <script src="js/websocket-fix.js"></script>
    <script src="chrome-extension-fix.js"></script>
    <script src="chrome-extension-reload-fix.js"></script>
    <script src="js/cors-proxy.js"></script>
    <!-- Optional: LiveReload error handler -->
    <script src="js/livereload-handler.js"></script>
    
    <!-- External stylesheets -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="css/about.css">
    <style>
        #page-header.about-header {
            background-image: url('img/banner/b16.jpg');
            background-size: cover;
            background-position: top 25% center;
            position: relative;
            z-index: 1;
        }
        
        #page-header.about-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }
        
        #page-header h2, 
        #page-header p {
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }
    </style>
    
    <!-- FIXED: Load auth.js only once via script loader -->
    <script src="js/script-loader.js"></script>
    
    <!-- FIXED: Cart service is loaded by script loader only, not directly -->
    <!-- Remove the duplicate cart service scripts -->
    <link rel="stylesheet" href="css/search.css">
    <script src="js/search.js"></script>
</head>

<body>

    <section id="header">
        <a href="index.html"><img src="img/logo.png" class="logo" alt="FitZone Logo"></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a class="active" href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="far fa-shopping-bag"></i><span class="cart-count">0</span></a></li>
                    <!-- Search Bar Integration -->
                    <li class="search-container">
                        <form id="search-form">
                            <input type="text" id="search-input" placeholder="Search products..." aria-label="Search products">
                            <button type="submit" id="search-button">
                                <i class="fas fa-search"></i>
                            </button>
                        </form>
                        <div id="search-results" class="search-results"></div>
                    </li>
                    <li class="account-menu" id="account-menu-login">
                        <a href="login.html">Login</a>
                    </li>
                    <li class="account-menu" id="account-menu-dropdown" style="display:none;">
                        <a href="profile.html" class="account-link">
                            <span id="user-name-nav">Account</span> <i class="fas fa-user"></i>
                        </a>
                        <div class="dropdown-content">
                            <a href="profile.html">My Profile</a>
                            <a href="orders.html">My Orders</a>
                            <a href="#" id="logout-link">Logout</a>
                        </div>
                    </li>
                    <a href="#" id="close"><i class="far fa-times"></i></a>
                </ul>
            </div>
        <div id="search-container">
            <div class="search-wrapper">
                <input type="text" id="search-input" placeholder="Search for products...">
                <button id="search-button"><i class="fas fa-search"></i></button>
                <div id="search-results"></div>
            </div>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="far fa-shopping-bag"></i><span class="cart-count">0</span></a>
            <i class="fas fa-search" onclick="toggleSearchBar()"></i>
            <i id="bar" class="fas fa-outdent"></i>
        </div>
    </section>

    <section id="page-header" class="about-header">
        <h2>#KnowUs</h2>
        <p>Premium fitness supplements & equipment for your journey</p>
    </section>

    <section id="about-head" class="section-p1">
        <img src="img/logo.png" alt="About Us Image">
        <div>
            <h2>Who We Are</h2>
            <p>FitZone was founded in 2025 with a simple mission: to provide premium quality fitness supplements and equipment that actually deliver results. We started as a small operation with just three fitness enthusiasts who were tired of overpriced, under-performing products in the market.</p>
            <p>Today, we've grown into a leading online fitness retailer trusted by thousands of customers who share our passion for health and fitness. What sets us apart is our commitment to quality, transparency, and customer satisfaction. We personally test all products before they hit our shelves, provide detailed nutritional information, and offer expert advice to help you choose the right products for your goals.</p>
            <p>Whether you're just starting your fitness journey or you're a seasoned athlete, we're here to support you every step of the way with the best supplements and equipment in the industry.</p>
            <abbr title="Our Promise">Your gains are our business, and we take that seriously.</abbr>

            <div id="slogan-banner">
                <span class="slogan-text">Premium quality fitness supplements and equipment - Whey Proteins, BCAAs, Mass Gainers, Pre-Workouts, and Fitness Accessories - Trusted by professionals and fitness enthusiasts alike.</span>
            </div>
        </div>
    </section>

    <section id="about-values" class="section-p1">
        <h2>Our Core Values</h2>
        <div class="values-container">
            <div class="value-box">
                <i class="fas fa-check-circle"></i>
                <h3>Quality</h3>
                <p>We never compromise on the quality of our products. All supplements are manufactured in certified facilities and undergo rigorous testing.</p>
            </div>
            <div class="value-box">
                <i class="fas fa-user-shield"></i>
                <h3>Transparency</h3>
                <p>We believe in full disclosure about what goes into our products, with accurate labels and honest marketing.</p>
            </div>
            <div class="value-box">
                <i class="fas fa-heart"></i>
                <h3>Customer Focus</h3>
                <p>Your satisfaction is our priority. We're committed to exceptional service and support at every step.</p>
            </div>
            <div class="value-box">
                <i class="fas fa-flask"></i>
                <h3>Innovation</h3>
                <p>We continuously research and develop new formulations and products to help you achieve better results.</p>
            </div>
        </div>
    </section>

    <section id="about-app" class="section-p1">
        <h1>Download Our <a href="#">App</a></h1>
        <div class="video">
            <video autoplay muted loop src="img/3209068-uhd_3840_2160_25fps.mp4"></video>
        </div>
    </section>

    <section id="about-team" class="section-p1">
        <h2>Meet Our Team</h2>
        <p>The fitness experts behind FitZone</p>
        
        <div class="team-container">
            <div class="team-member">
                <img src="img/people/1.png" alt="Team Member">
                <div class="team-info">
                    <h3>SERRHINI Abdellah</h3>
                    <p class="position">Co-Founder & CEO</p>
                    <p>Former professional bodybuilder with 15+ years of industry experience. John oversees our product development and quality control.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="team-member">
                <img src="img/people/2.png" alt="Team Member">
                <div class="team-info">
                    <h3>SERRHINI Abdellah</h3>
                    <p class="position">Co-Founder & Nutrition Expert</p>
                    <p>Certified nutritionist specializing in sports nutrition. Emma ensures all our supplements meet the highest nutritional standards.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="team-member">
                <img src="img/people/3.png" alt="Team Member">
                <div class="team-info">
                    <h3>SERRHINI Abdellah</h3>
                    <p class="position">Co-Founder & Head of Research</p>
                    <p>Sports scientist with a PhD in Exercise Physiology. David leads our research team in developing innovative fitness solutions.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="feature" class="section-p1">
        <div class="fe-box">
            <img src="img/features/f1.png" alt="Free Shipping">
            <h6>Free Shipping</h6>
        </div>
        <div class="fe-box">
            <img src="img/features/f2.png" alt="Online Order">
            <h6>Online Order</h6>
        </div>
        <div class="fe-box">
            <img src="img/features/f3.png" alt="Save Money">
            <h6>Save Money</h6>
        </div>
        <div class="fe-box">
            <img src="img/features/f4.png" alt="Promotions">
            <h6>Promotions</h6>
        </div>
        <div class="fe-box">
            <img src="img/features/f5.png" alt="Happy Sell">
            <h6>Happy Sell</h6>
        </div>
        <div class="fe-box">
            <img src="img/features/f6.png" alt="24/7 Support">
            <h6>24/7 Support</h6>
        </div>
    </section>

    <section id="newsletter" class="section-p1 section-m1">
        <div class="newstext">
            <h4>Sign Up For Newsletters</h4>
            <p>Get E-mail updates about our latest products and <span>special offers.</span></p>
        </div>
        <div class="form">
            <input type="text" placeholder="Your email address">
            <button class="normal">Sign Up</button>
        </div>
    </section>

    <footer class="section-p1">
        <div class="col">
            <img class="logo" src="img/logo.png" alt="">
            <h4>Contact</h4>
            <p><strong>Address: </strong> 123 Fitness Street, Health District, Cityville</p>
            <p><strong>Phone:</strong> +1 234 567 8901 / +1 234 567 8902</p>
            <p><strong>Hours:</strong> 10:00 - 18:00, Mon - Sat</p>
            <div class="follow">
                <h4>Follow Us</h4>
                <div class="icon">
                    <i class="fab fa-facebook-f"></i>
                    <i class="fab fa-twitter"></i>
                    <i class="fab fa-instagram"></i>
                    <i class="fab fa-pinterest-p"></i>
                    <i class="fab fa-youtube"></i>
                </div>
            </div>
        </div>

        <div class="col">
            <h4>About</h4>
            <a href="about.html">About Us</a>
            <a href="#">Delivery Information</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms & Conditions</a>
            <a href="contact.html">Contact Us</a>
        </div>

        <div class="col">
            <h4>My Account</h4>
            <a href="login.html">Sign In</a>
            <a href="cart.html">View Cart</a>
            <a href="#">My Wishlist</a>
            <a href="#">Track My Order</a>
            <a href="#">Help</a>
        </div>

        <div class="col install">
            <h4>Install App</h4>
            <p>From App Store or Google Play</p>
            <div class="row">
                <img src="img/pay/app.jpg" alt="">
                <img src="img/pay/play.jpg" alt="">
            </div>
            <p>Secured Payment Gateways </p>
            <img src="img/pay/pay.png" alt="">
        </div>

        <div class="copyright">
            <p>Â© 2025, FitZone - Premium Fitness Products & Supplements</p>
        </div>
    </footer>

    <!-- FIXED: Streamlined script loading to prevent duplicates -->
    <!-- Core modules -->
    <script src="js/products.js"></script>
    <script src="js/cart.js"></script>
    <script src="script.js"></script>
    <script src="js/header.js"></script>
    
    <!-- Load auth-header.js only once, after the global-logout-fix.js -->
    <script src="js/auth-header.js"></script>
    
    <!-- Load auth-ui and auth-logout in correct order -->
    <script src="js/auth-ui.js"></script>
    <script src="js/auth-logout.js"></script>
    <script src="js/universal-logout-fix.js"></script>
    <script src="js/universal-logout.js"></script>

    
    <!-- Unified logout implementation -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle logout from both profile button and dropdown with a single function
            function setupLogoutHandlers() {
                // Handle profile logout button
                const logoutBtn = document.getElementById('logout-btn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Logout clicked from profile button');
                        performLogout();
                    });
                }
                
                // Handle dropdown logout link
                const logoutLink = document.getElementById('logout-link');
                if (logoutLink) {
                    logoutLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Logout clicked from dropdown');
                        performLogout();
                    });
                }
            }
            
            // Unified logout function
            function performLogout() {
                console.log('Performing logout');
                
                try {
                    // Signal to other components that this is a user-initiated logout
                    window.preventAutoLogout = false;
                    window.lastUserInteraction = Date.now();
                    
                    // Clear all auth data directly - this is the most reliable approach
                    localStorage.removeItem('fitzone_token');
                    localStorage.removeItem('fitzone_user');
                    localStorage.removeItem('fitzone_auth_state');
                    
                    // Trigger any logout handlers that might be listening for these events
                    window.dispatchEvent(new CustomEvent('fitzone_logout'));
                    
                    // Redirect to homepage
                    console.log('Logout successful, redirecting to home page');
                    window.location.href = 'index.html';
                } catch (error) {
                    console.error('Error during logout:', error);
                    alert('An error occurred during logout. Your session has been cleared.');
                    window.location.href = 'index.html';
                }
            }
            
            // Call the setup function to register handlers
            setupLogoutHandlers();
        });
    </script>
</body>
</html>